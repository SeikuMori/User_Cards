# Вопросы экзаменатора и короткие ответы — проект `django-person-card`

Формат:
- Вопрос — краткий ответ (где смотреть в коде).

---

## `cards/models.py`
1. В: Для чего нужен `ImageField` в модели `Person`?
   - О: Хранит путь к загруженному файлу и интегрируется с `MEDIA_ROOT`/`MEDIA_URL`. (см. `Person.photo`)
2. В: Почему поля `last_name`, `first_name` валидируются `RegexValidator`?
   - О: Чтобы разрешить только кириллические символы, предотвращая ввод некорректных данных (см. validators).
3. В: Чем отличается `blank=True` и `null=True`?
   - О: `blank=True` влияет на валидацию форм (пустое значение разрешено), `null=True` — значение NULL в БД. (в `middle_name` и `photo`)
4. В: Что делает `ordering` в `Meta`?
   - О: Определяет порядок, в котором ORM возвращает записи по умолчанию.
5. В: Почему переопределён `__str__`?
   - О: Для удобного отображения объекта в админке и логах (читаемое представление).

---

## `cards/views.py`
1. В: Почему используются class-based views (ListView/CreateView/etc.)?
   - О: Они сокращают код, предоставляют готовую реализацию CRUD и легко настраиваются (см. определение классов).
2. В: Что делает `get_queryset` в `PersonListView`?
   - О: Добавляет простую фильтрацию по `q` (GET-параметр) для поиска по имени/фамилии.
3. В: Почему `reverse_lazy` используется в `success_url`?
   - О: `reverse_lazy` откладывает вычисление URL до времени выполнения (нужно в атрибутах классов).
4. В: Как реализована локализация меток формы?
   - О: В `get_form` читается `language` из сессии, `get_translation` возвращает словарь переводов, затем обновляются `label` и `placeholder` полей.
5. В: Как обрабатывается удаление записи?
   - О: `PersonDeleteView` наследует `DeleteView`, отображает шаблон подтверждения и при POST удаляет запись и редиректит на список.

---

## `cards/urls.py`
1. В: Что даёт `app_name = 'cards'`?
   - О: Пространство имён для URL-имен, используется в шаблонах `{% url 'cards:person_list' %}`.
2. В: Чем отличаются маршруты с и без `<int:pk>`?
   - О: Маршруты с `<int:pk>` принимают идентификатор записи и передают его в view для получения конкретного объекта.
3. В: Где определить новый маршрут для экспорта данных CSV?
   - О: Добавить `path('export/', views.ExportView.as_view(), name='export')` в `urlpatterns`.

---

## `cards/middleware.py`
1. В: Для чего нужна `LocaleMiddleware` в этом проекте?
   - О: Сохраняет выбор языка в сессии через GET-параметр `lang` и записывает текущий язык в `request.LANGUAGE`.
2. В: Почему используются `print()` в middleware — нормально ли это?
   - О: Для дебага в dev; в проде лучше использовать логгер (`logging`).
3. В: Когда middleware вызывается?
   - О: Для каждого запроса, поскольку она расположена в списке `MIDDLEWARE` в `settings.py`.

---

## `cards/context_processors.py`
1. В: Как переменная `t` попадает в шаблоны?
   - О: Через этот контекст-процессор, он возвращает `{'t': get_translation(lang)}` и перечислен в `TEMPLATES` -> `context_processors`.
2. В: Почему удобнее использовать context_processor, а не передавать `t` из view?
   - О: Контекст-процессор делает `t` доступным глобально в шаблонах без правки каждого view.

---

## `cards/admin.py`
1. В: Что делает `@admin.register(Person)`?
   - О: Регистрирует `PersonAdmin` в админке для модели `Person`.
2. В: Для чего нужен `format_html` в `photo_preview`?
   - О: Безопасно формирует HTML для превью изображения, предотвращая XSS.
3. В: Что такое `readonly_fields` и почему `photo_preview` туда входит?
   - О: Поля, которые отображаются только для чтения в форме админки; превью не должно быть редактируемым.

---

## Шаблоны: `person_list.html`, `person_detail.html`, `person_form.html`, `person_confirm_delete.html`
1. В: Как реализован поиск на странице списка?
   - О: Поле формы с `name="q"` и обработка в `PersonListView.get_queryset`.
2. В: Почему удаление выполняется через POST в шаблоне?
   - О: Безопасность: операции изменения/удаления должны выполняться через POST, а не GET.
3. В: Как показывается имя выбранного файла при загрузке фотографии?
   - О: JS в `person_form.html` слушает событие `change` у скрытого `input[type=file]` и обновляет текст.
4. В: Что такое `is_paginated` и откуда оно берётся?
   - О: Атрибут, который добавляет Django при использовании пагинации (`paginate_by` в ListView).

---

## `personal_card_system/settings.py`
1. В: Где указываются статические и медиа файлы?
   - О: `STATICFILES_DIRS`, `STATIC_ROOT`, `MEDIA_ROOT`, `MEDIA_URL`.
2. В: Почему `DEBUG=False` в этом файле и что с этим делать локально?
   - О: Безопасная настройка; для разработки поставьте `DEBUG=True` в локальной копии.
3. В: Как подключается `LocaleMiddleware` и что он делает?
   - О: В списке `MIDDLEWARE` — он читает GET-параметр `lang` и сохраняет выбор в сессии.
4. В: Почему в `DATABASES` настроен Postgres и как поменять на SQLite для локальной сдачи?
   - О: Проект изначально на Postgres; для локальной работы можно временно заменить `ENGINE` и `NAME` на SQLite: `{'ENGINE': 'django.db.backends.sqlite3', 'NAME': BASE_DIR / 'db.sqlite3'}`.

---

## `manage.py`
1. В: Что делает `os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'personal_card_system.settings')`?
   - О: Указывает Django, какие настройки использовать при выполнении `manage.py` команд.
2. В: Как запустить локально сервер разработки?
   - О: `python manage.py runserver`.

---

### Что дальше
- Могу добавить к каждому вопросу ссылку на конкретные строки в файлах (формат `path:line`) — скажите, если нужно.
- Могу сгенерировать PDF этих документов для печати.

Файл сохранён: `docs/exam_questions.md`.
